---
layout: default
---
<style>
    /* 1. ESTILOS GENERALES */
    body { background-color: #121212 !important; color: #fff; }

    /* CABECERA */
    .album-header-bg {
        position: relative;
        padding: 60px 0 40px;
        overflow: hidden;
        margin-bottom: 30px;
        background: linear-gradient(180deg, #404040 0%, #121212 100%);
    }
    .bg-blur {
        position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        background-size: cover; background-position: center;
        filter: blur(60px) brightness(0.4); z-index: 0; opacity: 0.6;
    }
    .album-content { position: relative; z-index: 2; }

    .item-cover-img {
        width: 100%; max-width: 300px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-radius: 8px;
    }

    h1.item-title { font-weight: 800; font-size: 3rem; margin-bottom: 10px; line-height: 1; letter-spacing: -1px; }
    h2.item-artist { font-weight: 600; font-size: 1.5rem; color: #b3b3b3; margin-bottom: 20px; }

    .genre-tag {
        display: inline-block; background: rgba(255,255,255,0.1);
        padding: 5px 15px; border-radius: 20px;
        font-size: 0.85rem; font-weight: bold; margin-right: 5px; margin-bottom: 5px;
        border: 1px solid rgba(255,255,255,0.2);
    }

    /* TRACKLIST */
    .track-list-container {
        background-color: #181818; padding: 30px; border-radius: 8px; margin-top: 20px;
    }
    .track-item {
        display: flex; align-items: center; padding: 12px 0;
        border-bottom: 1px solid #282828; color: #b3b3b3; transition: background-color 0.2s;
    }
    .track-item:hover { background-color: #282828; color: #fff; padding-left: 10px; border-radius: 4px; }
    .track-num { width: 30px; text-align: center; color: #888; }
    .track-name { flex-grow: 1; font-weight: 500; }

    /* META BOX */
    .meta-box { background: #181818; border-radius: 8px; padding: 20px; }
    .meta-table { width: 100%; font-size: 0.9rem; }
    .meta-table td { padding: 12px 0; border-bottom: 1px solid #333; color: #ccc; }
    .meta-label { font-weight: 700; color: #fff; width: 35%; }
    
    /* ENLACE VOLVER: CAMBIADO */
    .btn-back { color: #fff; text-decoration: none; font-weight: bold; margin-bottom: 20px; display: inline-block;}
    .btn-back:hover { color: #1DB954; }

    /* --- CAJAS ANIMADAS --- */
    .info-box-animated {
        display: flex; align-items: center;
        border-radius: 12px; padding: 20px; margin-top: 25px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        position: relative; overflow: hidden;
        border: 2px solid transparent;
    }
    
    .info-box-animated::before {
        content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
        background: linear-gradient(to right, transparent, rgba(255,255,255,0.2), transparent);
        transform: skewX(-25deg); transition: 0s;
    }
    .info-box-animated:hover::before { left: 150%; transition: 0.7s ease-in-out; }

    .box-icon { font-size: 2.2rem; margin-right: 15px; }
    .box-content { flex-grow: 1; z-index: 1; }
    .box-label-top { font-size: 0.7rem; font-weight: 800; text-transform: uppercase; margin-bottom: 4px; letter-spacing: 1px; opacity: 0.9; }
    .box-text-main { font-weight: 700; font-size: 0.95rem; line-height: 1.3; color: #fff; }

    /* Estilos Premios */
    .award-gold { background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), #121212); border-color: #FFD700; }
    .award-gold .box-label-top, .award-gold .box-icon { color: #FFD700; }
    .award-blue { background: linear-gradient(135deg, rgba(46, 119, 208, 0.15), #121212); border-color: #2E77D0; }
    .award-blue .box-label-top, .award-blue .box-icon { color: #57a0f6; }
    .award-purple { background: linear-gradient(135deg, rgba(142, 68, 173, 0.15), #121212); border-color: #9b59b6; }
    .award-purple .box-label-top, .award-purple .box-icon { color: #cd84ea; }

    /* --- ESTILOS CAJA DE FORMATO --- */
    .format-green {
        background: linear-gradient(135deg, rgba(29, 185, 84, 0.1), #121212);
        border-color: #1DB954;
    }
    .format-green .box-label-top { color: #1DB954; }

    .format-icons-row { display: flex; gap: 20px; margin-top: 10px; }
    
    /* Estado Base (Apagado) */
    .f-icon { 
        opacity: 0.2; 
        filter: grayscale(100%); 
        transition: all 0.3s; 
        display: flex; flex-direction: column; align-items: center; 
    }
    
    /* Estado Activo (Encendido) */
    .f-icon.active { 
        opacity: 1; 
        filter: grayscale(0%); 
        transform: scale(1.05); 
    }
    
    .f-name { font-size: 0.6rem; margin-top: 6px; color: #888; font-weight: bold; }
    .f-icon.active .f-name { color: #1DB954; text-shadow: 0 0 5px rgba(29, 185, 84, 0.4); }

    /* --- 1. ICONO DIGITAL (SONDAS ANIMADAS) --- */
    .icon-digital { display: flex; gap: 3px; align-items: flex-end; height: 24px; width: 24px; justify-content: center; }
    .icon-digital span { 
        width: 5px; 
        background-color: #1DB954; 
        border-radius: 2px; 
        height: 4px; 
    }
    
    /* Animaci√≥n de equalizador */
    @keyframes equalizer {
        0% { height: 4px; }
        50% { height: 24px; }
        100% { height: 4px; }
    }

    /* Solo se mueven si est√° activo */
    .f-icon.active .icon-digital span:nth-child(1) { animation: equalizer 0.8s infinite ease-in-out; }
    .f-icon.active .icon-digital span:nth-child(2) { animation: equalizer 0.6s infinite ease-in-out 0.1s; } 
    .f-icon.active .icon-digital span:nth-child(3) { animation: equalizer 0.9s infinite ease-in-out 0.2s; }

    /* --- 2. ICONO CD --- */
    .icon-cd { 
        width: 24px; height: 24px; background: radial-gradient(circle, #ddd 20%, #fff 21%, #eee 100%);
        border-radius: 50%; position: relative; box-shadow: 0 0 5px rgba(255,255,255,0.2);
    }
    .icon-cd::after {
        content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 6px; height: 6px; background-color: #121212; border-radius: 50%; border: 1px solid #ccc;
    }

    /* --- 3. ICONO VINILO MEJORADO (Surcos) --- */
    .icon-vinyl { 
        width: 24px; height: 24px; 
        border-radius: 50%; 
        position: relative; 
        background: repeating-radial-gradient(
          #222,
          #222 2px,
          #111 3px,
          #111 4px
        );
        box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    .icon-vinyl::before {
        content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(255,255,255,0.1) 100%);
        border-radius: 50%;
    }
    .icon-vinyl::after {
        content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 8px; height: 8px; background-color: #e74c3c; border-radius: 50%; border: 1px solid #c0392b;
    }

</style>

<div id="loading" class="text-center mt-5 text-white">Cargando √°lbum...</div>
<div id="error-msg" class="container mt-5 text-center text-danger" style="display:none;"></div>

<div id="item-container" style="display:none;">
    <div class="album-header-bg">
        <div class="bg-blur" id="bg-blur-img"></div>
        <div class="container album-content">
            <a href="javascript:history.back()" class="btn-back">‚Üê Volver a la p√°gina anterior</a>
            
            <div class="row align-items-end">
                <div class="col-md-4 text-center text-md-start mb-4 mb-md-0">
                    <img id="item-image" src="" alt="Portada" class="item-cover-img">
                </div>
                <div class="col-md-8">
                    <div class="text-uppercase" style="font-size: 0.8rem; letter-spacing: 1px; margin-bottom: 5px;">√Ålbum</div>
                    <h1 id="item-title" class="item-title">T√≠tulo</h1>
                    <h2 id="item-creator" class="item-artist">Artista</h2>
                    
                    <div class="d-flex align-items-center mt-3">
                        <span id="item-year" class="fw-bold me-3 text-white"></span> 
                        <span class="text-muted">‚Ä¢</span> 
                        <span id="item-songs-count" class="mx-3 text-white"></span>
                        <span class="text-muted">‚Ä¢</span> 
                        <span id="header-duration" class="mx-3 text-white"></span>
                    </div>
                    
                    <div id="item-genres" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mb-5">
        <div class="row">
            <div class="col-lg-8 mb-5 mb-lg-0">
                <h3 class="mb-3 text-white">Lista de Canciones</h3>
                <div class="track-list-container" id="tracklist-box"></div>
            </div>
            <div class="col-lg-4">
                
                <div id="format-container-box"></div>
                <div id="award-container-box"></div>

            </div>
        </div>
    </div>
</div>

<script>
    // 1. CARGA DE DATOS AUTOM√ÅTICA
    {% assign db_data = site.data['demo-metadata'] %}
    const rawData = {{ db_data | jsonify | default: '[]' }};

    const albumsDB = {};

    if (Array.isArray(rawData)) {
        rawData.forEach(item => {
            if (item.objectid) { albumsDB[item.objectid] = item; }
        });
    }

    // 2. L√ìGICA
  // 2. RECUPERAR ID (INTELIGENTE)
  const urlParams = new URLSearchParams(window.location.search);
    let targetId = urlParams.get('id');

    // FALLBACK: Si no hay ?id=, intentamos leerlo de la URL (para enlaces antiguos)
    if (!targetId) {
        // Ejemplo: /items/item001.html -> le quitamos .html y nos queda item001
        const path = window.location.pathname;
        const filename = path.substring(path.lastIndexOf('/') + 1);
        if (filename && filename.includes('.html')) {
            targetId = filename.replace('.html', '');
        }
    }

    if (!targetId || !albumsDB[targetId]) {
        document.getElementById('loading').style.display = 'none';
        document.getElementById('error-msg').style.display = 'block';
        document.getElementById('error-msg').innerHTML = `<h3>‚ö† √Ålbum no encontrado</h3>`;
    } else {
        const item = albumsDB[targetId];
        document.getElementById('loading').style.display = 'none';
        document.getElementById('item-container').style.display = 'block';

        // Textos B√°sicos
        document.getElementById('item-title').innerText = item.title || "Sin t√≠tulo";
        document.getElementById('item-creator').innerText = item.creator || "Artista desconocido";
        document.getElementById('item-year').innerText = item.date || "-";
        document.getElementById('item-songs-count').innerText = (item.track_count || "?") + " canciones";
        document.getElementById('header-duration').innerText = item.duration || "-";

        let imgSrc = item.filename;
        if (imgSrc && !imgSrc.includes('/')) { imgSrc = "{{ '/objects/' | relative_url }}" + imgSrc; }
        if (imgSrc) {
            document.getElementById('item-image').src = imgSrc;
            document.getElementById('bg-blur-img').style.backgroundImage = `url('${imgSrc}')`;
        }

        const genreContainer = document.getElementById('item-genres');
        genreContainer.innerHTML = '';
        if (item.subject) {
            item.subject.split(';').forEach(g => {
                const span = document.createElement('span');
                span.className = "genre-tag"; span.innerText = g.trim(); genreContainer.appendChild(span);
            });
        }

        const trackBox = document.getElementById('tracklist-box');
        trackBox.innerHTML = '';
        if (item.tracks) {
            item.tracks.split(';').forEach((trackName, index) => {
                const div = document.createElement('div');
                div.className = "track-item";
                div.innerHTML = `<div class="track-num">${index + 1}</div><div class="track-name">${trackName.trim()}</div>`;
                trackBox.appendChild(div);
            });
        } else {
            trackBox.innerHTML = '<p class="text-muted">Lista no disponible.</p>';
        }

        // --- L√ìGICA CAJA DE FORMATO ---
        const formatBox = document.getElementById('format-container-box');
        formatBox.innerHTML = '';
        
        const fmtText = (item.formato_fisico || item.format || "").toLowerCase();
        const hasDigital = fmtText.includes('digital');
        const hasCD = fmtText.includes('cd');
        const hasVinyl = fmtText.includes('vinilo') || fmtText.includes('vinyl');

        if (fmtText.trim() !== "") {
            formatBox.innerHTML = `
                <div class="info-box-animated format-green mb-4">
                    <div class="box-content">
                        <div class="box-label-top">DISPONIBILIDAD & FORMATO</div>
                        <div class="format-icons-row">
                            
                            <div class="f-icon ${hasDigital ? 'active' : ''}">
                                <div class="icon-digital"><span></span><span></span><span></span></div>
                                <div class="f-name">DIGITAL</div>
                            </div>

                            <div class="f-icon ${hasCD ? 'active' : ''}">
                                <div class="icon-cd"></div>
                                <div class="f-name">CD</div>
                            </div>

                            <div class="f-icon ${hasVinyl ? 'active' : ''}">
                                <div class="icon-vinyl"></div>
                                <div class="f-name">VINILO</div>
                            </div>

                        </div>
                    </div>
                </div>
            `;
        }

        // --- L√ìGICA CAJA DE PREMIOS ---
        const awardContainer = document.getElementById('award-container-box');
        awardContainer.innerHTML = ''; 

        if (item.awards && item.awards.trim() !== "") {
            const text = item.awards.toLowerCase();
            let styleClass = "award-gold"; 
            let icon = "üèÜ";
            let label = "CERTIFICACI√ìN";

            if (text.includes("debut") || text.includes("spotify") || text.includes("top") || text.includes("#") || text.includes("lista")) {
                styleClass = "award-blue"; icon = "üìà"; label = "POSICIONAMIENTO";
            } else if (text.includes("culto") || text.includes("cr√≠tica") || text.includes("mejores") || text.includes("mondosonoro")) {
                styleClass = "award-purple"; icon = "‚≠ê"; label = "DISTINCI√ìN EDITORIAL";
            }

            awardContainer.innerHTML = `
                <div class="info-box-animated ${styleClass}">
                    <div class="box-icon">${icon}</div>
                    <div class="box-content">
                        <div class="box-label-top">${label}</div>
                        <div class="box-text-main">${item.awards}</div>
                    </div>
                </div>
            `;
        }
    }
</script>