---
layout: default
title: Zona de Exploraci√≥n
---

<style>
    /* --- DISE√ëO DARK EXPLORER --- */
    body {
        background-color: #0d0d0d !important;
        color: #e0e0e0;
        font-family: 'Segoe UI', sans-serif;
    }

    .explorer-wrapper {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
        padding-top: 20px;
        gap: 30px;
        padding-left: 20px;
        padding-right: 20px;
    }

    /* BARRA LATERAL */
    .sidebar {
        flex: 0 0 300px;
        background: #161616;
        padding: 25px;
        border-radius: 12px;
        height: fit-content;
        border: 1px solid #333;
        position: sticky;
        top: 20px;
    }

    .sidebar h2 { font-size: 1.2rem; color: #fff; margin-bottom: 20px; font-weight: 800; text-transform: uppercase; border-bottom: 2px solid #1db954; padding-bottom: 10px; }
    .filter-group { margin-bottom: 25px; }
    .filter-label { display: block; font-size: 0.75rem; font-weight: 700; color: #1db954; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
    
    .sidebar-input, .sidebar-select {
        width: 100%;
        background: #000;
        border: 1px solid #333;
        color: #fff;
        padding: 10px;
        border-radius: 6px;
        font-size: 0.9rem;
    }
    .sidebar-input:focus { border-color: #1db954; outline: none; }

    /* ESTILO NUEVO: BOTONES DE G√âNERO (MULTISELECCI√ìN) */
    .genre-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    .genre-btn {
        background: #252525;
        border: 1px solid #333;
        color: #aaa;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: 0.2s;
        font-weight: 600;
        text-transform: capitalize;
    }
    .genre-btn:hover { background: #333; color: white; }
    
    /* Cuando el bot√≥n est√° activo (seleccionado) */
    .genre-btn.active {
        background: #1db954;
        color: #000;
        border-color: #1db954;
        box-shadow: 0 0 10px rgba(29, 185, 84, 0.4);
    }

    /* REJILLA */
    .results-area { flex: 1; }
    
    .results-header { 
        display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; 
        background: #1db954; color: black; padding: 15px 25px; border-radius: 8px; font-weight: bold;
    }

    .neon-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 20px;
    }

    .neon-card {
        background: #1a1a1a;
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.2s, box-shadow 0.2s;
        border: 1px solid #222;
    }
    .neon-card:hover { 
        transform: translateY(-5px); 
        box-shadow: 0 0 15px rgba(29, 185, 84, 0.4);
        border-color: #1db954;
    }

    .neon-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; filter: brightness(0.9); }
    .neon-body { padding: 15px; }
    
    .neon-title { 
        color: #fff; font-weight: 700; font-size: 1rem; 
        margin-bottom: 5px; line-height: 1.2; text-decoration: none; display: block; 
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 
    }
    .neon-artist { color: #999; font-size: 0.85rem; margin-bottom: 10px; }

    .genre-container { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 10px; }
    .genre-tag { background-color: #333; color: #fff; font-size: 0.65rem; font-weight: 600; padding: 3px 8px; border-radius: 4px; border: 1px solid #444; text-transform: uppercase; }
    .year-badge { font-size: 0.75rem; color: #1db954; font-weight: bold; display: block; margin-top: 5px; }

    .hidden { display: none !important; }
</style>

<div class="explorer-wrapper">
    
    <aside class="sidebar">
        <h2>Filtros</h2>
        
        <div class="filter-group">
            <label class="filter-label">Buscar</label>
            <input type="text" id="searchInput" class="sidebar-input" placeholder="Artista, √Ålbum...">
        </div>

        <div class="filter-group">
            <label class="filter-label">Formato</label>
            <select id="formatFilter" class="sidebar-select">
                <option value="">Todos</option>
                <option value="Vinilo">Vinilo</option>
                <option value="CD">CD</option>
                <option value="Digital">Digital</option>
            </select>
        </div>

        <div class="filter-group">
            <label class="filter-label">G√©neros</label>
            <div class="genre-cloud">
                {% assign all_subjects = site.data['demo-metadata'] | map: 'subject' | join: ';' | split: ';' %}
                {% assign unique_subjects = all_subjects | uniq | sort %}
                
                {% for genre in unique_subjects %}
                    {% assign clean_genre = genre | strip %}
                    {% if clean_genre != "" %}
                        <button class="genre-btn" onclick="toggleGenre(this, '{{ clean_genre | downcase }}')">
                            {{ clean_genre }}
                        </button>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

        <button onclick="resetAll()" style="width:100%; padding:10px; background:#333; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; margin-top:10px;">Borrar Filtros</button>
    </aside>

    <main class="results-area">
        <div class="results-header">
            <span>COLECCI√ìN</span>
            <span id="countDisplay">{{ site.data['demo-metadata'].size }} √Ålbumes</span>
        </div>

        <div class="neon-grid" id="grid">
            {% for item in site.data['demo-metadata'] %}
            <div class="neon-card" 
                 data-text="{{ item.title | downcase }} {{ item.creator | downcase }}"
                 data-format="{{ item.formato_fisico | downcase }}"
                 data-subject="{{ item.subject | downcase }}"> <a href="{{ '/items/' | relative_url }}{{ item.objectid }}.html" style="text-decoration:none;">
                    <img src="{{ '/objects/' | relative_url }}{{ item.objectid }}.jpg" class="neon-img" 
                         onerror="this.src='https://via.placeholder.com/300x300/000000/FFFFFF?text=No+Cover';">
                    
                    <div class="neon-body">
                        <div class="neon-title">{{ item.title }}</div>
                        <div class="neon-artist">{{ item.creator }}</div>
                        
                        <div class="genre-container">
                            {% assign genres = item.subject | split: ';' %}
                            {% for g in genres limit:3 %}
                                <span class="genre-tag">{{ g | strip }}</span>
                            {% endfor %}
                        </div>

                        <span class="year-badge">{{ item.date }}</span>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
        
        <div id="noResults" style="display:none; text-align:center; padding:50px; color:#666;">
            <h3>üö´ No hay resultados</h3>
        </div>
    </main>

</div>

<script>
    const input = document.getElementById('searchInput');
    const formatSelect = document.getElementById('formatFilter');
    const cards = document.querySelectorAll('.neon-card');
    const countDisplay = document.getElementById('countDisplay');
    const noResults = document.getElementById('noResults');
    const genreButtons = document.querySelectorAll('.genre-btn');

    // Array para guardar los g√©neros seleccionados
    let activeGenres = [];

    // Funci√≥n para activar/desactivar botones de g√©nero
    function toggleGenre(btn, genre) {
        if (activeGenres.includes(genre)) {
            // Si ya est√°, lo quitamos
            activeGenres = activeGenres.filter(g => g !== genre);
            btn.classList.remove('active');
        } else {
            // Si no est√°, lo a√±adimos
            activeGenres.push(genre);
            btn.classList.add('active');
        }
        filter(); // Ejecutar filtro
    }

    function filter() {
        const text = input.value.toLowerCase();
        const format = formatSelect.value.toLowerCase();
        let visible = 0;

        cards.forEach(card => {
            const cardText = card.dataset.text;
            const cardFormat = card.dataset.format;
            const cardSubjects = card.dataset.subject; // String con todos los g√©neros del disco

            // 1. Coincidencia de texto
            const matchText = cardText.includes(text);
            
            // 2. Coincidencia de formato
            const matchFormat = format === "" || cardFormat.includes(format);

            // 3. Coincidencia de G√©neros (L√≥gica "O" / "OR")
            // Si no hay g√©neros seleccionados, mostramos todos (true).
            // Si hay seleccionados, el disco debe tener AL MENOS UNO de ellos.
            let matchGenre = true;
            if (activeGenres.length > 0) {
                // Comprobamos si alguno de los g√©neros activos est√° en el disco
                const hasAnyGenre = activeGenres.some(g => cardSubjects.includes(g));
                if (!hasAnyGenre) {
                    matchGenre = false;
                }
            }

            // Resultado final
            if (matchText && matchFormat && matchGenre) {
                card.classList.remove('hidden');
                visible++;
            } else {
                card.classList.add('hidden');
            }
        });

        countDisplay.innerText = visible + " √Ålbumes";
        noResults.style.display = visible === 0 ? 'block' : 'none';
    }

    function resetAll() {
        input.value = "";
        formatSelect.value = "";
        
        // Resetear array y botones visuales
        activeGenres = [];
        genreButtons.forEach(btn => btn.classList.remove('active'));
        
        filter();
    }

    // Escuchar cambios
    input.addEventListener('keyup', filter);
    formatSelect.addEventListener('change', filter);
</script>